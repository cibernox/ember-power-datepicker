{"version":3,"file":"power-datepicker.js","sources":["../../src/components/power-datepicker.ts"],"sourcesContent":["import Component from '@glimmer/component';\nimport { tracked } from '@glimmer/tracking';\nimport { action } from '@ember/object';\nimport type {\n  DropdownActions,\n  BasicDropdownDefaultBlock,\n  BasicDropdownArgs,\n} from 'ember-basic-dropdown/components/basic-dropdown';\nimport type { NormalizeCalendarValue } from 'ember-power-calendar/utils';\nimport type {\n  CalendarDay,\n  SelectedDays,\n  PowerCalendarActions,\n  PowerCalendarArgs,\n  PowerCalendarAPI,\n  PowerCalendarDefaultBlock,\n} from 'ember-power-calendar/components/power-calendar';\n\ninterface PowerDatepickerSignature {\n  Element: HTMLElement;\n  Args: PowerDatepickerArgs;\n  Blocks: {\n    default: [PowerDatepickerDefaultBlock];\n  };\n}\n\ninterface PowerDatepickerArgs {\n  initiallyOpened?: BasicDropdownArgs['initiallyOpened'];\n  renderInPlace?: BasicDropdownArgs['renderInPlace'];\n  verticalPosition?: BasicDropdownArgs['verticalPosition'];\n  horizontalPosition?: BasicDropdownArgs['horizontalPosition'];\n  destination?: BasicDropdownArgs['destination'];\n  disabled?: BasicDropdownArgs['disabled'];\n  matchTriggerWidth?: BasicDropdownArgs['matchTriggerWidth'];\n  onOpen?: BasicDropdownArgs['onOpen'];\n  onClose?: BasicDropdownArgs['onClose'];\n  calculatePosition?: BasicDropdownArgs['calculatePosition'];\n\n  locale?: PowerCalendarArgs['locale'];\n  selected?: PowerCalendarArgs['selected'];\n  onCenterChange?: PowerCalendarArgs['onCenterChange'];\n\n  closeOnSelect?: boolean;\n  onSelect?: (\n    day: CalendarDay,\n    calendar: PowerDatepickerCalendar,\n    event: MouseEvent,\n  ) => void | boolean;\n}\n\ninterface PowerDatepickerActions\n  extends DropdownActions,\n    PowerCalendarActions {}\n\nexport interface PowerDatepickerCalendar {\n  uniqueId: string;\n  disabled: boolean;\n  isOpen: boolean;\n  calendarUniqueId: string;\n  selected?: SelectedDays;\n  loading: boolean;\n  center: Date;\n  locale: string;\n  actions: PowerDatepickerActions;\n}\n\nexport interface PowerDatepickerDefaultBlock extends PowerDatepickerCalendar {\n  Trigger: BasicDropdownDefaultBlock['Trigger'];\n  Content: BasicDropdownDefaultBlock['Content'];\n  Nav: PowerCalendarDefaultBlock['Nav'];\n  Days: PowerCalendarDefaultBlock['Days'];\n}\n\nexport default class PowerDatepickerComponent extends Component<PowerDatepickerSignature> {\n  @tracked center: Date | undefined;\n\n  get closeOnSelect() {\n    return this.args.closeOnSelect !== undefined\n      ? this.args.closeOnSelect\n      : true;\n  }\n\n  @action\n  async onCenterChange(\n    newCenter: NormalizeCalendarValue,\n    calendar: PowerCalendarAPI,\n    event: MouseEvent,\n  ): Promise<void> {\n    if (this.args.onCenterChange) {\n      await this.args.onCenterChange(newCenter, calendar, event);\n    }\n\n    this.center = newCenter.date;\n  }\n\n  @action\n  handleSelect(\n    day: CalendarDay,\n    datepicker: PowerDatepickerCalendar,\n    e: MouseEvent,\n  ) {\n    const value = this.args.onSelect && this.args.onSelect(day, datepicker, e);\n    if (value === false || !this.closeOnSelect) {\n      return;\n    }\n\n    datepicker.actions.close();\n  }\n}\n"],"names":["PowerDatepickerComponent","Component","g","prototype","tracked","i","void 0","closeOnSelect","args","undefined","onCenterChange","newCenter","calendar","event","center","date","n","action","handleSelect","day","datepicker","e","value","onSelect","actions","close","setComponentTemplate","TEMPLATE"],"mappings":";;;;;;;;;AAyEe,MAAMA,wBAAwB,SAASC,SAAS,CAA2B;AAAA,EAAA;IAAAC,CAAA,CAAA,IAAA,CAAAC,SAAA,EAAA,QAAA,EAAA,CACvFC,OAAO,CAAA,CAAA;AAAA;AAAA,EAAA,OAAA,IAAAC,CAAA,CAAA,IAAA,EAAA,QAAA,CAAA,EAAAC,SAAA;EAER,IAAIC,aAAaA,GAAG;AAClB,IAAA,OAAO,IAAI,CAACC,IAAI,CAACD,aAAa,KAAKE,SAAS,GACxC,IAAI,CAACD,IAAI,CAACD,aAAa,GACvB,IAAI;AACV;AAEA,EAAA,MACMG,cAAcA,CAClBC,SAAiC,EACjCC,QAA0B,EAC1BC,KAAiB,EACF;AACf,IAAA,IAAI,IAAI,CAACL,IAAI,CAACE,cAAc,EAAE;MAC5B,MAAM,IAAI,CAACF,IAAI,CAACE,cAAc,CAACC,SAAS,EAAEC,QAAQ,EAAEC,KAAK,CAAC;AAC5D;AAEA,IAAA,IAAI,CAACC,MAAM,GAAGH,SAAS,CAACI,IAAI;AAC9B;AAAC,EAAA;IAAAC,CAAA,CAAA,IAAA,CAAAb,SAAA,EAAA,gBAAA,EAAA,CAXAc,MAAM,CAAA,CAAA;AAAA;AAcPC,EAAAA,YAAYA,CACVC,GAAgB,EAChBC,UAAmC,EACnCC,CAAa,EACb;AACA,IAAA,MAAMC,KAAK,GAAG,IAAI,CAACd,IAAI,CAACe,QAAQ,IAAI,IAAI,CAACf,IAAI,CAACe,QAAQ,CAACJ,GAAG,EAAEC,UAAU,EAAEC,CAAC,CAAC;IAC1E,IAAIC,KAAK,KAAK,KAAK,IAAI,CAAC,IAAI,CAACf,aAAa,EAAE;AAC1C,MAAA;AACF;AAEAa,IAAAA,UAAU,CAACI,OAAO,CAACC,KAAK,EAAE;AAC5B;AAAC,EAAA;IAAAT,CAAA,CAAA,IAAA,CAAAb,SAAA,EAAA,cAAA,EAAA,CAZAc,MAAM,CAAA,CAAA;AAAA;AAaT;AAACS,oBAAA,CAAAC,QAAA,EAnCoB3B,wBAAwB,CAAA;;;;"}